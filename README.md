# 図書館で見る - Chrome拡張機能

Amazon の書籍ページに図書館の蔵書情報を自動的に表示する Chrome 拡張機能です。

## 🚀 機能

- **自動検索**: Amazon の書籍ページを開くと、自動的に図書館の蔵書を検索
- **ISBN検索**: 正確な書籍情報で検索
- **Amazon風UI**: Amazon のデザインに溶け込むような表示
- **Keepa風配置**: 価格情報の近くに自然に配置
- **ワンクリックアクセス**: 図書館の詳細ページに直接リンク

## 📦 インストール方法

### 開発版（手動インストール）

1. このプロジェクトをクローンまたはダウンロード
2. Chrome を開く
3. `chrome://extensions/` にアクセス
4. 右上の「デベロッパーモード」を有効にする
5. 「パッケージ化されていない拡張機能を読み込む」をクリック
6. `chrome-extension` フォルダを選択

## 🎯 使用方法

1. Amazon.co.jp の書籍ページにアクセス
2. ページが読み込まれると、自動的に図書館の蔵書を検索
3. 結果が価格情報の近くに表示されます：
   - ✅ **図書館にあります！**: 蔵書がある場合
   - ❌ **図書館にはありません**: 蔵書がない場合
   - ⚠️ **エラー**: 検索に問題がある場合

4. 「図書館で確認する」ボタンから詳細ページにアクセス

## 📋 対応サイト

- Amazon.co.jp の書籍ページ
- 図書館システム: WebOPAC (libopac-c.kosen-k.go.jp)

## 🔧 技術仕様

### ファイル構成

```text
chrome-extension/
├── manifest.json          # 拡張機能の設定
├── content.js             # Amazon ページに注入されるスクリプト
├── content.css            # UI スタイル
├── background.js          # バックグラウンドでの検索処理
├── popup.html             # 拡張機能ポップアップ
└── icons/                 # アイコンファイル
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

### 検索ロジック

1. **ISBN検索（優先）**:
   - ISBN-13 または ISBN-10 を抽出
   - WebOPAC の詳細検索 API を使用

2. **キーワード検索（フォールバック）**:
   - タイトル + 著者名で検索
   - 結果の精度を高めるため正規化処理

### 表示位置

- Amazon の価格情報セクションの下
- Keepa 等の他の拡張機能と類似の位置
- レスポンシブ対応

## 🎨 UI デザイン

- Amazon のデザインガイドラインに準拠
- グラデーション背景とボタンスタイル
- 角丸とシャドウでモダンな見た目
- モバイル対応

## ⚙️ 設定とカスタマイズ

現在の検索対象図書館を変更したい場合は、`background.js` の以下の部分を編集してください：

```javascript
// 図書館システムのURL
const LIBRARY_BASE_URL = 'https://libopac-c.kosen-k.go.jp/webopac12/';
```

## 🔒 プライバシー

- Amazon の書籍情報のみを取得
- 個人情報は収集しません
- 検索履歴は保存しません
- 全ての通信は HTTPS で暗号化

## 🐛 トラブルシューティング

### 拡張機能が表示されない

1. Amazon の書籍ページかどうか確認
2. デベロッパーツールでエラーがないか確認
3. 拡張機能が有効になっているか確認

### 検索結果が表示されない

1. ISBN が正しく抽出されているか確認
2. 図書館システムがアクセス可能か確認
3. CORS エラーがないか確認

### デバッグ方法

```javascript
// コンソールでデバッグ情報を確認
console.log('LibraryFinder Debug Info');
```

## 📝 開発

### 元のスクリプトとの関係

この拡張機能は `working_scraper.js` の機能をベースに作成されています：

- 同一の検索ロジック
- 同一の HTML 解析処理
- Chrome 拡張機能として再実装

### 更新と改善

- より多くの図書館システムに対応
- 検索精度の向上
- UI/UX の改善
- 設定画面の追加

## 📄 ライセンス

MIT License - 自由に使用・改変・配布が可能です。

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します！

---

**注意**: この拡張機能は教育・研究目的で作成されています。Amazon や図書館システムの利用規約を遵守してご利用ください。
